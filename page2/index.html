<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">

<meta property="og:title" content="An Ostler in IT">
<title>An Ostler in IT</title>
<meta property="og:description" content="Adventures in self-publicity">
<meta property="og:url" content="http://www.rumford.name/page2/">
<meta property="og:site_name" content="An Ostler in IT">
<meta property="og:locale" content="en_UK">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@ianrumford">
<meta name="twitter:creator" content="@ianrumford">
<meta name="twitter:title" content="An Ostler in IT">
<meta name="twitter:description" content="Adventures in self-publicity">
<meta name="twitter:url" content="http://www.rumford.name/page2/">

<meta name="keywords" content="IT Ostler Horses Courses">

<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/main.css">
<link rel="canonical" href="http://www.rumford.name/page2/">
<link rel="alternate" type="application/atom+xml" title="An Ostler in IT" href="http://www.rumford.name/feed.xml" />

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script language="Javascript" type="text/javascript">
function search_google()
{
  var query = document.getElementById("google-search").value;
  window.open("http://google.com/search?q=" + query
      + "%20site:" + "http://www.rumford.name");
}
</script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');

</script>


<script type='text/javascript'>
var blocklink = ['http://humanorightswatch.org','http://o-o-6-o-o.com','http://darodar.com','http://blackhatworth.com','http://hulfingtonpost.com','http://bestwebsitesawards.com','http://darodar.com','http://buttons-for-website.com','http://ilovevitaly.co','http://semalt.com','http://priceg.com','http://simple-share-buttons.com','http://googlsucks.com','http://4webmasters.org','http://aliexpress.com','http://addons.mozilla.org/en-US/firefox/addon/ilovevitaly/','http://free-share-buttons.com','http://buttons-for-your-website.com','http://theguardlan.com','http://buy-cheap-online.info','http://best-seo-offer.com','http://4webmasters.org','http://trafficmonetize.org','http://howtostopreferralspam.eu','http://ilovevitaly.com','http://sanjosestartups.com','http://free-social-buttons.com','http://best-seo-offer.com','http://guardlink.org','http://www.event-tracking.com','http://www3.free-social-buttons.com','http://www1.free-social-buttons.com','http://www2.free-social-buttons.com','http://websites-reviews.com','http://floating-share-buttons.com','http://satellite.maps.ilovevitaly.com','http://free-social-buttons.com','http://www.event-tracking.com','http://erot.co'];
for (var b = blocklink.length; b--;) {
  if (document.referrer.match(blocklink[b]))
    window.location = "http://www.google.com";
}
</script>



<link type="application/atom+xml" rel="alternate" href="http://www.rumford.name/atom.xml" title="An Ostler in IT" />
</head>


<body>

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/">An Ostler in IT</a></h1>
    <h3 class="site-meta">Horses for Courses</h3>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
        <a class="page-link" href="/">Home</a>
        
        
        
        <a class="page-link" href="/about/">About</a>
        
        
        
        <a class="page-link" href="/archives/">Archives</a>
        
        
        
        <a class="page-link" href="/categories/">Categories</a>
        
        
        
        <a class="page-link" href="/tags/">Tags</a>
        
        
        
        <a class="page-link" href="/guestbook/"></a>
        
        
        
        <a class="page-link" href="/feed.xml"></a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


    

  <div class="page-content col-sm-8">
    <div class="home">
  <div class="post" itemscope itemtype="http://schema.org/BlogPosting" >

    

    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/elixir/pipe/clojure/thread-first/macro/2016/07/24/writing-your-own-elixir-pipe-operator.html">Writing your own Elixir pipe operator</a>
      </h1>
      <meta itemprop="keywords" content="" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#elixir">elixir</a>, 
      
      <a href="/categories/#pipe">pipe</a>, 
      
      <a href="/categories/#clojure">clojure</a>, 
      
      <a href="/categories/#thread-first">thread-first</a>, 
      
      <a href="/categories/#macro">macro</a>
      
      
      <time itemprop="datePublished" datetime="2016-07-24">
        on Jul 24, 2016
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
      
      <blockquote>
  <p>TL;DR: Elixir - a language that positively celebrates the use of macros</p>
</blockquote>

<p>I’ve been picking up some <a href="http://elixir-lang.org/">Elixir</a> so
I can try my hand at a new project I want to build using the
<a href="http://www.erlang.org/">Erlang/OTP</a> ecosystem.</p>

<p><a href="http://elixir-lang.org/">Elixir</a> uses <em>lots and lots</em> of
compile-time macros. The language’s pervasive use of macros
is unprecedented in my experience. Most (all?) of the core features of Elixir (its
<a href="http://elixir-lang.org/docs/v1.0/elixir/Kernel.SpecialForms.html">special forms</a>) are (non-overridable) macros
(e.g. the <a href="http://elixir-lang.org/docs/v1.0/elixir/Kernel.SpecialForms.html#case/2">case</a> statement)</p>

<p>Everybody likes and wants to use a language that has macros. But you
are not supposed to use them right? ☺  ☺  ☺</p>

<p>Possibly the single most
comment that has endeared me to <a href="http://elixir-lang.org/">Elixir</a> and its community
is a passage from 
<a href="https://twitter.com/chris_mccord">Chris McCord’s</a> great book <a href="https://pragprog.com/book/cmelixir/metaprogramming-elixir">Metaprogramming Elixir</a>.</p>

<blockquote>
  <p>Some of the greatest insights I’ve had with macros have been with
irresponsible code that I would never ship to production. There’s no
substitute for learning by experimentation.</p>

  <p>Write irresponsible code, experiment, and have fun. Use the insight
you gain to drive design decisions of things you would ship to a
production system.</p>
</blockquote>

<p>In the same vein as Chris’s <em>just-give-it-a-go-and-learn-some-lessons</em> meme, I recently watched <a href="https://twitter.com/ztellman">Zack Tellman’s</a>
talk
<a href="https://www.youtube.com/watch?v=o69H0MXCNxw">Some Things that Macros do</a>
at last year’s <a href="http://www.curry-on.org/">Curry On!</a> where he made the point that macro usage in <a href="http:///clojure.org">Clojure</a> has tended to be either
at the low-end, standard fare of boilerplate removal, or up at the high-end where the
<em>doyen</em> of <a href="http:///clojure.org">Clojure</a> macros
<a href="http://www.infoq.com/interviews/baldridge-core-async">core.async</a> towers.
Zack reckoned the gap between the two extremes offered plenty of
space for people to <em>experiment</em>  with macros.</p>

<p>So, with that thought, this post is my first <em>irresponsible experiment</em> in designing, writing
and using <a href="http://elixir-lang.org/">Elixir</a> macros. <em>Caveat Emptor</em></p>


      <p style="text-align: right"><a href="/elixir/pipe/clojure/thread-first/macro/2016/07/24/writing-your-own-elixir-pipe-operator.html">Read more</a></p>
      
    </article>
    <hr />

    

    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/clojure/sugar/threading/macros/2014/10/24/some-syntactic-sugar-for-clojure-threading-macros.html">Some syntactic sugar for Clojure's threading macros</a>
      </h1>
      <meta itemprop="keywords" content="" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#clojure">clojure</a>, 
      
      <a href="/categories/#sugar">sugar</a>, 
      
      <a href="/categories/#threading">threading</a>, 
      
      <a href="/categories/#macros">macros</a>
      
      
      <time itemprop="datePublished" datetime="2014-10-24">
        on Oct 24, 2014
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
      
      <blockquote>
  <p>TL;DR: threading all the things</p>
</blockquote>

<blockquote>
  <p>Update: 1Sep15</p>

  <p>Whilst writing I discovered this post has not been updated after I’d
received some feedback from Shaun Parker. No idea what happened.
Sorry Shaun! You might want to jump straight to the “Update 1Sep15”
section, and have a look at my some-as→ macro.</p>
</blockquote>

<h1 id="introductiona-idorgheadline1a">Introduction<a id="orgheadline1"></a></h1>

<p>The other day I was writing a <a href="http://clojure.org">Clojure</a> <a href="http://clojuredocs.org/clojure_core/clojure.core/let">let</a> block to
transform a map. It
was a pretty usual <a href="http://clojure.org">Clojure</a> <em>pipeline</em> of functions,
a use case <a href="http://clojure.org">Clojure</a> excels at. The <em>pipeline</em> included a
<a href="http://clojuredocs.org/clojure_core/clojure.core/cond">cond</a>, a couple of
<a href="http://clojuredocs.org/clojure_core/clojure.core/map">maps</a>, some of my own functions, 
and finally an <a href="http://clojuredocs.org/clojure_core/clojure.core/assoc">assoc</a> and <a href="http://clojuredocs.org/clojure_core/clojure.core/dissoc">dissoc</a> to “update” the input map with the
result of the <em>pipeline</em> and delete some redundant keys.</p>

<p>Even though <a href="http://clojure.org">Clojure</a> syntax is quite spare there was
quite a bit of inevitable clutter in  the
code and it struck me the code would be cleaner and clearer if I
could use the <a href="http://clojuredocs.org/clojure_core/clojure.core/&gt;-">thread first</a> (→) <a href="http://clojuredocs.org/clojure_core/clojure.core/defmacro">macro</a>.</p>

<p>If you grok macros you can probably guess the rest of this post (likely you
will have seen the title and probably said to yourself “Oh yeah, that’s
obvious, nothing to see here” and moved along ☺ )</p>


      <p style="text-align: right"><a href="/clojure/sugar/threading/macros/2014/10/24/some-syntactic-sugar-for-clojure-threading-macros.html">Read more</a></p>
      
    </article>
    <hr />

    

    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/clojure/transducers/reducers/2014/08/08/Some-trivial-examples-of-using-Clojure-Transducers.html">Some trivial examples of using Clojure Transducers</a>
      </h1>
      <meta itemprop="keywords" content="" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#clojure">clojure</a>, 
      
      <a href="/categories/#transducers">transducers</a>, 
      
      <a href="/categories/#reducers">reducers</a>
      
      
      <time itemprop="datePublished" datetime="2014-08-08">
        on Aug 8, 2014
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
      
      <blockquote>
  <p>TL;DR: first take on Clojure’s new Transducers</p>
</blockquote>

<h1 id="introductiona-idorgheadline1a">Introduction<a id="orgheadline1"></a></h1>

<p><a href="https://twitter.com/richhickey">Rich Hickey</a> published a <a href="http://blog.cognitect.com/blog/2014/8/6/transducers-are-coming">post</a> a few days ago on the
forthcoming <a href="http://blog.cognitect.com/blog/2014/8/6/transducers-are-coming">Transducers</a>.</p>

<p><strong>Transducers</strong> should make their first appearance in <a href="http:///clojure.org">Clojure</a> <em>1.7.0</em>
and the examples below were run using <em>1.7.0-alpha1</em></p>

<p>The first paragraph of Rich’s post describes <strong>Transducers</strong> as:</p>

<blockquote>
  <p>Transducers are a powerful and composable way to build algorithmic
transformations that you can reuse in many contexts, and they’re
coming to Clojure core and core.async.</p>
</blockquote>

<p>Rich also says:</p>

<blockquote>
  <p>The other source of power comes from the fact that transducers compose using ordinary function composition.</p>
</blockquote>

<p><strong>Transducers</strong> follow on from <strong>Reducers</strong>, first
<a href="http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html">announced</a> by Rich in
May 2012.</p>

<p>I wrote a post back in late 2012 called <a href="http://ianrumford.github.io/blog/2013/08/25/some-trivial-examples-of-using-clojure-reducers/">Some trivial examples of
using Clojure Reducers</a> in which I
attempted to offer some practical, if contrived, examples of how to
use <strong>reducers</strong>.</p>

<p>This post reprises the examples in the <a href="http://ianrumford.github.io/blog/2013/08/25/some-trivial-examples-of-using-clojure-reducers/">reducers post</a> but now includes
equivalent contrived <strong>transducers</strong> examples as well.</p>

<p>I’ve includes some material from the <a href="http://ianrumford.github.io/blog/2013/08/25/some-trivial-examples-of-using-clojure-reducers/">reducers post</a> for completeness, but without
any explanation, so you don’t have to flip between the two. But you may
want to refer to the <a href="http://ianrumford.github.io/blog/2013/08/25/some-trivial-examples-of-using-clojure-reducers/">reducers post</a> for <strong>reducers</strong> background.</p>


      <p style="text-align: right"><a href="/clojure/transducers/reducers/2014/08/08/Some-trivial-examples-of-using-Clojure-Transducers.html">Read more</a></p>
      
    </article>
    <hr />

    

    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/big/data/benefit/apache/yahoo/twitter/likedin/google/hadoop/hive/impala/hdfs/hbase/cassandra/pig/cascalog/scalding/nlp/lucene/solr/d3/r/ruby/python/java/scala/clojure/machine/learning/statistics/visualization/devops/spark/mesos/storm/summingbird/2014/03/22/benefits-of-using-big-data-software.html">The benefits of using the Big Data software ecosystem</a>
      </h1>
      <meta itemprop="keywords" content="" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#big">big</a>, 
      
      <a href="/categories/#data">data</a>, 
      
      <a href="/categories/#benefit">benefit</a>, 
      
      <a href="/categories/#apache">apache</a>, 
      
      <a href="/categories/#yahoo">yahoo</a>, 
      
      <a href="/categories/#twitter">twitter</a>, 
      
      <a href="/categories/#likedin">likedin</a>, 
      
      <a href="/categories/#google">google</a>, 
      
      <a href="/categories/#hadoop">hadoop</a>, 
      
      <a href="/categories/#hive">hive</a>, 
      
      <a href="/categories/#impala">impala</a>, 
      
      <a href="/categories/#hdfs">hdfs</a>, 
      
      <a href="/categories/#hbase">hbase</a>, 
      
      <a href="/categories/#cassandra">cassandra</a>, 
      
      <a href="/categories/#pig">pig</a>, 
      
      <a href="/categories/#cascalog">cascalog</a>, 
      
      <a href="/categories/#scalding">scalding</a>, 
      
      <a href="/categories/#nlp">nlp</a>, 
      
      <a href="/categories/#lucene">lucene</a>, 
      
      <a href="/categories/#solr">solr</a>, 
      
      <a href="/categories/#d3">d3</a>, 
      
      <a href="/categories/#r">r</a>, 
      
      <a href="/categories/#ruby">ruby</a>, 
      
      <a href="/categories/#python">python</a>, 
      
      <a href="/categories/#java">java</a>, 
      
      <a href="/categories/#scala">scala</a>, 
      
      <a href="/categories/#clojure">clojure</a>, 
      
      <a href="/categories/#machine">machine</a>, 
      
      <a href="/categories/#learning">learning</a>, 
      
      <a href="/categories/#statistics">statistics</a>, 
      
      <a href="/categories/#visualization">visualization</a>, 
      
      <a href="/categories/#devops">devops</a>, 
      
      <a href="/categories/#spark">spark</a>, 
      
      <a href="/categories/#mesos">mesos</a>, 
      
      <a href="/categories/#storm">storm</a>, 
      
      <a href="/categories/#summingbird">summingbird</a>
      
      
      <time itemprop="datePublished" datetime="2014-03-22">
        on Mar 22, 2014
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
      
      <blockquote>
  <p>A colleague asked me for a brief high level overview of the <strong>Big
Data</strong> software ecosystem, why his company should use it, what for and what’s in it.  These
are the tidied up notes I put together quickly.</p>
</blockquote>

<p><a href="http://en.wikipedia.org/wiki/Big_data"><strong>Big Data</strong></a> is a convenient mnemonic to describe an ecosystem of
computing tools, techniques and technologies that has grown up over
the past decade to address many of the data processing challenges
faces by modern enterprises with growing data assets.</p>

<p>This document tales a liberal view of what is inside and outside of a
strict definition of the ecosystem because, in total, it represents
the most complete set of freely available software options for many
enterprises’ data processing needs.</p>


      <p style="text-align: right"><a href="/big/data/benefit/apache/yahoo/twitter/likedin/google/hadoop/hive/impala/hdfs/hbase/cassandra/pig/cascalog/scalding/nlp/lucene/solr/d3/r/ruby/python/java/scala/clojure/machine/learning/statistics/visualization/devops/spark/mesos/storm/summingbird/2014/03/22/benefits-of-using-big-data-software.html">Read more</a></p>
      
    </article>
    <hr />

    

    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/clojure/map/aspect/contract/2014/03/19/two-sugars-with-your-contracts-for-clojure-maps.html">Two sugars with your Contracts for Clojure Maps</a>
      </h1>
      <meta itemprop="keywords" content="" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#clojure">clojure</a>, 
      
      <a href="/categories/#map">map</a>, 
      
      <a href="/categories/#aspect">aspect</a>, 
      
      <a href="/categories/#contract">contract</a>
      
      
      <time itemprop="datePublished" datetime="2014-03-19">
        on Mar 19, 2014
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
      
      <h1 id="introductiona-idorgheadline1a">Introduction<a id="orgheadline1"></a></h1>

<p>One of the <a href="http:///clojure.org">Clojure</a> projects I’ve been working on uses
multi-level (hierarchical) <a href="http://en.wikipedia.org/wiki/Hash_table">maps</a> i.e. the values of the keys of a map at one level are often maps
themselves.</p>

<p>A common enough use case and as <a href="http://blog.fogus.me">Fogus</a> and
<a href="http://old.n01se.net/chouser">Chris Houser</a> observe in their book <a href="http://www.manning.com/fogus2">The Joy of Clojure</a> (section 5.6):</p>

<blockquote>
  <p>It’s difficult to write a program of any significant size without the
need for a map of some sort.</p>

  <p>The use of maps is ubiquitous in writing software because frankly it’s
difficult to imagine a more robust data structure.</p>
</blockquote>

<p>Maps  have been around quite a while.  In their book <a href="http://www.amazon.co.uk/Introduction-Algorithms-Thomas-H-Cormen/dp/0262032937/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1392992028&amp;sr=1-1&amp;keywords=0262032937">Introduction To
Algorithms</a> <em>Cormen et al</em> say Donald Knuth
<a href="http://books.google.co.uk/books?id=NLngYyWFl_YC&amp;pg=PA252&amp;lpg=PA252&amp;dq=luhn+hash+tables&amp;source=bl&amp;ots=BxWoJG3mJa&amp;sig=cTpYRKlO-rNe8TDar3ko8bv4MQ8&amp;hl=en&amp;sa=X&amp;ei=0UIHU662DKap7Abp1IHgCA&amp;ved=0CFoQ6AEwBg#v=onepage&amp;q=luhn%20hash%20tables&amp;f=false">attributed</a> the invention of
maps to <a href="http://en.wikipedia.org/wiki/Hans_Peter_Luhn">Hans Peter Luhn</a> in early 1953.</p>

<p>Using <a href="http://en.wikipedia.org/wiki/Hash_table">maps</a> is very natural and easy in
<a href="http:///clojure.org">Clojure</a> and indeed many other languages that support
them. Clojure takes <a href="http://amturing.acm.org/award_winners/perlis_0132439.cfm">Alan Perlis’s</a>
famous quote to heart by providing a rich set of functions to manage maps:</p>

<blockquote>
  <p>It’s better to have 100 functions operate on one data structure than 10 functions on 10 data structures.</p>
</blockquote>

<p>But using deep (multi-level) maps with many levels and many keys with long-ish
descriptive names can make the code look very cluttered and prone to
typos, misremembered key names, juxtaposition of levels, and similar,
often <em>silent</em>, errors as e.g. <em>get</em> and <em>get-in</em> will return a
value (nil) rather than raising an error, and <em>assoc</em> and <em>assoc-in</em>
wont care at all.</p>

<p>Its very easy in <a href="http:///clojure.org">Clojure</a> to write function(s) to encapsulate
the accesses to a key’s value, especially for multi-level keys, creating
“helper” <em>putter</em> and <em>getter</em> accessors.</p>

<p>Arguably, maybe  a stretch, you could think of these accessors as
<a href="http://en.wikipedia.org/wiki/Higher-order_function">_higher order_</a> functions where the (implicit) input functions are e.g.
<em>get</em> or <em>assoc</em>.</p>

<p>For example, and as usual a contrived example, where a deep multi-level map
holds all the details of a house:</p>

<figure class="highlight"><pre><code class="language-clojure" data-lang="clojure"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">change-kitchen-temperature</span><span class="w">
  </span><span class="p">[</span><span class="n">house-state</span><span class="w"> </span><span class="n">new-temperature</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">assoc-in</span><span class="w"> </span><span class="n">house-state</span><span class="w"> </span><span class="p">[</span><span class="no">:rooms</span><span class="w"> </span><span class="no">:kitchen</span><span class="w"> </span><span class="no">:properties</span><span class="w"> </span><span class="no">:temperature</span><span class="p">]</span><span class="w"> </span><span class="n">new-temperature</span><span class="p">))</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<figure class="highlight"><pre><code class="language-clojure" data-lang="clojure"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">install-kitchen-oven</span><span class="w">
  </span><span class="p">[</span><span class="n">house-state</span><span class="w"> </span><span class="n">new-oven</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">assoc-in</span><span class="w"> </span><span class="n">house-state</span><span class="w"> </span><span class="p">[</span><span class="no">:rooms</span><span class="w"> </span><span class="no">:kitchen</span><span class="w"> </span><span class="no">:appliances</span><span class="w"> </span><span class="no">:cooking</span><span class="w"> </span><span class="no">:oven</span><span class="p">]</span><span class="w"> </span><span class="n">new-oven</span><span class="p">))</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Which is nice (at least to me): semantically named accessors hiding
the details of the key hierarchy.  If the hierarchy needs to change for
any reason, only the accessor functions have to be changed.  A familiar enough
paradigm from many languages.</p>

<p>The other thing I’ve wanted to do  has been
to apply  <a href="&lt;http://en.wikipedia.org/wiki/Eiffel_(programming_language)&gt;#Design\_by\_Contract">contracts</a> to the <em>leaf</em> values in the map. You could
of course just use an <em><a href="http://clojuredocs.org/clojure_core/clojure.core/assert">assert</a></em> to apply a contract to a value in “open code”.
But that means the contract definition (i.e. assertion clause)
is scattered over the code base, hard to change, inconsistency may
creep in, etc.</p>

<p><a href="http://blog.fogus.me">Fogus’s</a>
<a href="https://github.com/clojure/core.contracts">clojure.core.contracts</a> library uses
<a href="http:///clojure.org">Clojure’s</a> <a href="http://blog.fogus.me/2009/12/21/clojures-pre-and-post/">:pre and post assertions</a> to apply contracts to a
function’s arguments and/or its result (return value).</p>

<p>In my recent <a href="http://ianrumford.github.io/blog/2014/02/19/a-little-sugar-with-your-clojure-aspect-contracts/">sugar post</a> on contracts, I demonstrated a
new library I’ve written
<a href="https://github.com/ianrumford/clojure-contracts-sugar">clojure-contracts-sugar</a> to add some
productivity macros (“sugar”) atop <a href="https://twitter.com/fogus">Fogus’s</a> <a href="https://github.com/clojure/core.contracts">library</a>.</p>

<p>In a nice bit of synergy, if you use <em>putter</em> and <em>getter</em> accessors
for a map’s <em>leaf</em> values, you can apply also contracts to them.</p>

<p>Enter my new library: <a href="https://github.com/ianrumford/clojure-contracts-maps">clojure-contracts-maps</a></p>


      <p style="text-align: right"><a href="/clojure/map/aspect/contract/2014/03/19/two-sugars-with-your-contracts-for-clojure-maps.html">Read more</a></p>
      
    </article>
    <hr />

    

  </div>
</div>

    <section class="pager">
  
  
  <li class="previous"><a href="/" title="Newer">&larr; Newer</a></li>
  
  
  
  <li class="next"><a href="/page3/" title="Older">Older &rarr;</a></li>
  
</section>

<script src="/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    if (e.target.nodeName.toUpperCase() != 'BODY') return;
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
        
        
        url = '/';
        
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = '/page3/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>



  </div>
  <div class="col-sm-2">
<div class="sidebar-module about">
  <h4>About Me</h4>
  <img title="Whistlejacket" src="/images/whistlejacket-circle-128px-2.png" alt="Whistlejacket"/>
  <span>Ian Rumford's whisperings</span>
  <br />

  

  You can contact me via: <br />

  
  <a href="mailto:ian@rumford.name" title="mailto: ian@rumford.name"><i class="fa fa-envelope-square fa-3x"></i></a>&nbsp;
  
  
  <a href="https://github.com/ianrumford" title="GithubID: ianrumford"><i class="fa fa-github-square fa-3x"></i></a>&nbsp;
  
  
  <a href="https://twitter.com/ianrumford" title="TwitterID: ianrumford"><i class="fa fa-twitter-square fa-3x"></i></a>
  

  

</div>

<div class="sidebar-module">
  <h4>Site Search</h4>
  <form onsubmit="search_google()" >
    <input type="text" id="google-search" placeholder="Google search" />
    <input type="submit" name="sa" value="Go" />
  </form>
</div>


<div class="sidebar-module"> <!-- sidebar-module-inset">-->
  <h4>Copyright Notice</h4>

  

  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
    <img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png">
  </a>
  <br />
  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-NonCommercial-ShareAlike</a>

  

</div>


<div class="sidebar-module">
  <h4>Recent Posts</h4>
  
  <li>
  <a href="/elixir/doctest/individual/2017/11/20/testing-individual-elixir-doctests.html" title="Testing Individual Elixir Doctests" rel="bookmark">Testing Individual Elixir Doctests</a>
  </li>
  
  <li>
  <a href="/elixir/metaprogramming/postwalk/2017/05/17/metaprogramming-without-macros.html" title="Metaprogramming Without Macros" rel="bookmark">Metaprogramming Without Macros</a>
  </li>
  
  <li>
  <a href="/elixir/siariwyd/callback/function/share/reuse/2016/11/17/siariwyd.html" title="Sharing and Reusing Elixir Callback Functions between Modules" rel="bookmark">Sharing and Reusing Elixir Callback Functions between Modules</a>
  </li>
  
  <li>
  <a href="/elixir/pattern/matching/runtime/polymorphism/2016/09/19/pattern-matching-to-polymorphism.html" title="Pattern Matching to Polymorphism - an Unexpected Journey" rel="bookmark">Pattern Matching to Polymorphism - an Unexpected Journey</a>
  </li>
  
  <li>
  <a href="/elixir/map/api/genserver/module/agent/state/2016/09/13/amlapio.html" title="Adding a Map API to a GenServer or Module with Agent-held State" rel="bookmark">Adding a Map API to a GenServer or Module with Agent-held State</a>
  </li>
  
</div>


<div class="sidebar-module">
  <h4>Tags</h4>
  
    <a href="/tags/#hello world" title="hello world" rel="1">hello world</a> &nbsp;
  
    <a href="/tags/#octopress" title="octopress" rel="1">octopress</a> &nbsp;
  
    <a href="/tags/#jekyll" title="jekyll" rel="1">jekyll</a> &nbsp;
  
    <a href="/tags/#blog" title="blog" rel="1">blog</a> &nbsp;
  
    <a href="/tags/#emacs" title="emacs" rel="2">emacs</a> &nbsp;
  
    <a href="/tags/#Ubuntu" title="Ubuntu" rel="1">Ubuntu</a> &nbsp;
  
    <a href="/tags/#precise" title="precise" rel="2">precise</a> &nbsp;
  
    <a href="/tags/#pangolin" title="pangolin" rel="1">pangolin</a> &nbsp;
  
    <a href="/tags/#12.04" title="12.04" rel="1">12.04</a> &nbsp;
  
    <a href="/tags/#clojure" title="clojure" rel="1">clojure</a> &nbsp;
  
    <a href="/tags/#leinginen" title="leinginen" rel="1">leinginen</a> &nbsp;
  
    <a href="/tags/#slime" title="slime" rel="1">slime</a> &nbsp;
  
    <a href="/tags/#swank" title="swank" rel="1">swank</a> &nbsp;
  
    <a href="/tags/#ubuntu" title="ubuntu" rel="1">ubuntu</a> &nbsp;
  
    <a href="/tags/#ruby" title="ruby" rel="1">ruby</a> &nbsp;
  
    <a href="/tags/#windows" title="windows" rel="1">windows</a> &nbsp;
  
    <a href="/tags/#ole" title="ole" rel="1">ole</a> &nbsp;
  
    <a href="/tags/#property" title="property" rel="1">property</a> &nbsp;
  
    <a href="/tags/#values" title="values" rel="1">values</a> &nbsp;
  
</div>


<div class="sidebar-module">
  <h4>Archives</h4>

  
  
  
  
  
  <li id="2017" > <a href="/archives/#2017">2017</a></li>
  
  
  
  
  
  
  
  
  
  <li id="2016" > <a href="/archives/#2016">2016</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2014" > <a href="/archives/#2014">2014</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2013" > <a href="/archives/#2013">2013</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2012" > <a href="/archives/#2012">2012</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

</div>


</div>



  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/">An Ostler in IT</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> 
  on 
  
  <a href="https://github.com/">Github</a>
  
  | Theme <a href="https://github.com/yulijia/freshman21/">Freshman21</a> Design by <a href="http://yulijia.net">Lijia Yu</a>
  | Adapted by Ian Rumford  


  <div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
    <a title="Back To Top"><img src="/images/topbutton.png"/></a>
  </div>

  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/totop.js"></script>  



</footer>


</div>

</body>

</html>
